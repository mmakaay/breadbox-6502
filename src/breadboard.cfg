# ld65 linker configuration for the breadboard computer
#
# Defines the memory map and segment layout. Hardware regions
# (e.g. UART, IO) use `define = yes` so their base addresses are
# exported as linker symbols (e.g. __UART_START__, __IO_START__).
# Driver code references these symbols instead of hard-coding
# addresses, making it easy to adapt to a different memory map.

MEMORY {
  ZEROPAGE: start = $0000, size = $0100, type = rw, file = "";
  STACK: start = $0100, size = $0200, type = rw, file = "";
  RAM: start = $0200, size = $3e00, type = rw, file = "";
  UART: start = $5000, size = $0004, type = rw, define = yes, file = "";
  IO: start = $6000, size = $0010, type = rw, define = yes, file = "";
  ROM: start = $8000, size = $7FFA , type = ro, fill = yes, file = %O;
  VECTORS: start = $FFFA, size = 6, type = ro, fill = yes, file = %O;
}

SEGMENTS {
  ZEROPAGE: load = "ZEROPAGE", type = bss;
  STACK: load = "STACK", type = bss;
  RAM: load = "RAM", type = bss;
  BIOS: load = "ROM", type = ro;
  CODE: load = "ROM", type = ro;
  DATA: load = "ROM", type = ro;
  VECTORS: load = "VECTORS", type = ro;
}
